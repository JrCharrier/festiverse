<div class="container-fluid mt-5">
  <h1 class="text-center mb-4" style="font-weight: 700; font-size: 2rem;">My Festivals</h1>

  <ul class="nav nav-tabs mb-3" id="dashboard-tabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="upcoming-tab" data-bs-toggle="tab" data-bs-target="#upcoming" type="button" role="tab" aria-controls="upcoming" aria-selected="true">
        À venir
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="current-tab" data-bs-toggle="tab" data-bs-target="#current" type="button" role="tab" aria-controls="current" aria-selected="false">
        En cours
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="past-tab" data-bs-toggle="tab" data-bs-target="#past" type="button" role="tab" aria-controls="past" aria-selected="false">
        Passés
      </button>
    </li>
  </ul>

  <div class="tab-content" id="dashboard-tab-content">
    <div class="tab-pane fade show active" id="upcoming" role="tabpanel" aria-labelledby="upcoming-tab">
      <% if @upcoming_festivals.any? %>
        <% @upcoming_festivals.each do |festival| %>
          <div class="card-index mb-3" style="display: flex; flex-direction: row; align-items: center;">
            <div class="card-body">
              <h5 class="card-title">
                <%= link_to festival.name, festival_path(festival) %>
              </h5>
              <p class="card-text text-muted">
                <strong>From:</strong> <%= festival.start_date %> <br>
                <strong>To:</strong> <%= festival.end_date %>
              </p>
            </div>
            <div style="flex-shrink: 0; margin-left: 15px;">
              <%= link_to festival_path(festival) do %>
                <% if festival.images.attached? %>
                  <%= image_tag(festival.images.last, alt: festival.name, class: "card-image") %>
                <% else %>
                  <p>Image non disponible</p>
                <% end %>
              <% end %>
            </div>
          </div>
        <% end %>
      <% else %>
        <p>Aucun festival à venir.</p>
      <% end %>
    </div>

    <div class="tab-pane fade" id="current" role="tabpanel" aria-labelledby="current-tab">
      <% if @current_festivals.any? %>
        <% @current_festivals.each do |festival| %>
          <div class="card-index mb-3" style="display: flex; flex-direction: row; align-items: center;">
            <div class="card-body">
              <h5 class="card-title">
                <%= link_to festival.name, festival_path(festival) %>
              </h5>
              <p class="card-text text-muted">
                <strong>From:</strong> <%= festival.start_date %> <br>
                <strong>To:</strong> <%= festival.end_date %>
              </p>
            </div>
            <div style="flex-shrink: 0; margin-left: 15px;">
              <%= link_to festival_path(festival) do %>
                <% if festival.images.attached? %>
                  <%= image_tag(festival.images.last, alt: festival.name, class: "card-image") %>
                <% else %>
                  <p>Image non disponible</p>
                <% end %>
              <% end %>
            </div>
          </div>
        <% end %>
      <% else %>
        <p>Aucun festival en cours.</p>
      <% end %>
    </div>

    <div class="tab-pane fade" id="past" role="tabpanel" aria-labelledby="past-tab">
      <% if @past_festivals.any? %>
        <% @past_festivals.each do |festival| %>
          <div class="card-index mb-3" style="display: flex; flex-direction: row; align-items: center;">
            <div class="card-body">
              <h5 class="card-title">
                <%= link_to festival.name, festival_path(festival) %>
              </h5>
              <p class="card-text text-muted">
                <strong>From:</strong> <%= festival.start_date %> <br>
                <strong>To:</strong> <%= festival.end_date %>
              </p>
            </div>
            <div style="flex-shrink: 0; margin-left: 15px;">
              <%= link_to festival_path(festival) do %>
                <% if festival.images.attached? %>
                  <%= image_tag(festival.images.last, alt: festival.name, class: "card-image") %>
                <% else %>
                  <p>Image non disponible</p>
                <% end %>
              <% end %>
            </div>
          </div>
        <% end %>
      <% else %>
        <p>Aucun festival passé.</p>
      <% end %>
    </div>
  </div>
</div>
